@page
@model RegisterModel
@{
	ViewData["Title"] = "Register";
	Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>@ViewData["Title"]</title>
	<link rel="stylesheet" href="/css/register_login.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
	<link rel="icon" type="image/png" href="https://unpkg.com/boxicons@2.1.4/svg/solid/bxs-user-plus.svg">
		  rel="stylesheet" />
</head>

<body class="basic-body">
	<header class="header-nav">
		<a href="@Url.Action("Index", "Meniu")" class="logo">
			<img src="@Url.Content("~/imagini/LogoToscana.png")" />
		</a>

		<nav class="navbar">
			<a href="@Url.Action("Index", "Meniu")"><i class='bx bxs-food-menu'></i>Meniu</a>
		</nav>

	</header>

	<div class="showcase-register">
		<div class="row">
			<div class="col-md-4">
				<div class="register-container">
					<h2 class="register-text">Create Account</h2>
					<form id="registerForm" asp-route-returnUrl="@Model.ReturnUrl" method="post">
						<div asp-validation-summary="ModelOnly" class="text-danger" role="alert"></div>

						<div class="form-floating mb-3">
							<label class="user-label-reg" for="Input.Email">
								<img src="/assets/user.png" alt="User Icon" width="24" height="24" />
								Email
							</label>
							<input asp-for="Input.Email" class="form-control" autocomplete="username" aria-required="true" placeholder="name@example.com" />
							<span asp-validation-for="Input.Email" class="text-danger"></span>
						</div>

						<div class="form-floating mb-3">
							<label class="user-label-reg" for="Input.Username">
								<img src="/assets/user.png" alt="User Icon" width="24" height="24" />
								Username
							</label>
							<input asp-for="Input.Username" class="form-control" autocomplete="username" aria-required="true" placeholder="Enter your username" />
							<span asp-validation-for="Input.Username" class="text-danger"></span>
						</div>

						<div class="form-floating mb-3">
							<label class="password-label-reg" for="Input.Password">
								<img src="/assets/password.png" alt="Password Icon" width="24" height="24" />
								Password
							</label>
							<input asp-for="Input.Password" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
							<span asp-validation-for="Input.Password" class="text-danger"></span>
						</div>

						<div class="form-floating mb-3">
							<label class="password-confirm-label-reg" for="Input.ConfirmPassword">
								<img src="/assets/password.png" alt="Confirm Password Icon" width="24" height="24" />
								Confirm Password
							</label>
							<input asp-for="Input.ConfirmPassword" class="form-control" autocomplete="new-password" aria-required="true" placeholder="password" />
							<span asp-validation-for="Input.ConfirmPassword" class="text-danger"></span>
						</div>

						<button id="registerSubmit" type="submit" class="w-100 btn btn-lg btn-primary">Register</button>
						<div class="link-container">
							<p>
								<a class="login-link" asp-page="./Login" asp-route-returnUrl="@Model.ReturnUrl">I have an account</a>
							</p>
						</div>
					</form>

					<div class="col-md-6 col-md-offset-2">
						<section>
							<h3>Use another service to register.</h3>
							<hr />
							@{
								if ((Model.ExternalLogins?.Count ?? 0) == 0)
								{
									<div>
										<p>
											There are no external authentication services configured.
										</p>
									</div>
								}
								else
								{
									<form id="external-account" asp-page="./ExternalLogin" asp-route-returnUrl="@Model.ReturnUrl" method="post" class="form-horizontal">
										<div>
											<p>
												@foreach (var provider in Model.ExternalLogins!)
												{
													<button type="submit" class="btn btn-primary" name="provider" value="@provider.Name" title="Log in using your @provider.DisplayName account">@provider.DisplayName</button>
												}
											</p>
										</div>
									</form>
								}
							}
						</section>
					</div>
				</div>
				<p id="error-message-register" class="text-danger"></p>
			</div>
		</div>
	</div>
	</div>

	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.5.1.min.js"></script>
	<script>
		$(document).ready(function () {
			var successMessage = '@TempData["SuccessMessage"]';
			var returnUrl = '@TempData["ReturnUrl"]';
			if (successMessage) {
				$('body').append('<div id="blur-background" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; backdrop-filter: blur(5px); z-index: 999;"></div>');
				Swal.fire({
					icon: 'success',
					title: 'Success',
					text: successMessage,
					showConfirmButton: false,
					timer: 3000,
					background: 'linear-gradient(135deg, #4caf50, #81c784)', // Green gradient
					width: '30em',
					padding: '3em',
					customClass: {
						popup: 'swal2-popup custom-popup',
						title: 'swal2-title',
						content: 'swal2-content',
						icon: 'swal2-icon',
						confirmButton: 'swal2-confirm'
					},
					willClose: () => {
						$('#blur-background').remove();
					},
					animation: true,
					grow: 'row'
				}).then(function () {
					window.location.href = returnUrl;
				});
			}
		});
	</script>
	@section Scripts {
		<partial name="_ValidationScriptsPartial" />
	}
</body>
</html> 